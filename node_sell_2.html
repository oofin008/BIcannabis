<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">

  <title>Cannabis</title>

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="plugins/fontawesome-free/css/all.min.css">
  <!-- overlayScrollbars -->
  <link rel="stylesheet" href="plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
  <!-- Google Font: Source Sans Pro -->
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
  
</head>
<body class="hold-transition layout-top-nav">
<div class="wrapper">
  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white nav-bar-light">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
      <li class="nav-item d-none d-sm-inline-block">
        <a href="index.html" class="nav-link">หน้าแรก</a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="node_import.html" class="nav-link">นำเข้ากัญชา</a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="node_plant.html" class="nav-link">การผลิตปลูก</a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="node_sell3.html" class="nav-link ">จำหน่ายพืช</a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="node_convert.html" class="nav-link">การผลิตแปรรูป</a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="node_sell_2.html" class="nav-link bg-info">จำหน่ายผลิตภัณฑ์</a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="node_sell_index.html" class="nav-link">การจำหน่ายบำบัด</a>
      </li>
      
      <li class="nav-item d-none d-sm-inline-block">
        <a href="node_occupy.html" class="nav-link">การครอบครอง</a>
      </li>
      
    </ul>

  </nav>
  <!-- /.navbar -->

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper ">
    <!-- Content Header (Page header) -->
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 id="pageTitle" class="m-0 text-dark">จำหน่ายผลิตภัณฑ์</h1>
          </div><!-- /.col -->
          <div class="col-sm-6">
            <div class="btn-group-lg float-right">
              <button style="width: 200px;" type="button" class="btn btn-tool dropdown-toggle" data-toggle="dropdown">
                <i class="fas fa-cannabis"></i>
                Sort select
              </button>
              <div class="dropdown-menu dropdown-menu-md-right" role="menu">
                <a href="?sortselected=SAS" class="dropdown-item">แผนปัจจุบัน</a>
                <a href="?sortselected=AUR" class="dropdown-item">แผนไทย</a>
                <a href="?sortselected=DEJA" class="dropdown-item">ผลิตภัณฑ์กัญชาน้ำมันเดชา</a>
              </div>
            </div>
          </div><!-- /.col -->
        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->

    <!-- Main content -->
    <section class="content">
      <div class="container">

        <div class="row">
          <div class="col-md-12">
            <div class="card ">
              <div class="card-header">
                <h5 class="card-title">5 ตำรับแรกที่จ่ายให้โรงพยาบาลมากที่สุด</h5>

                <div class="card-tools">
                  <button id = "paChart_button" type="button" class="btn bg-olive margin">รายละเอียด</button>
                  <!-- <div class="btn-group">
                    <button type="button" class="btn btn-tool dropdown-toggle" data-toggle="dropdown">
                      <i class="fas fa-calendar-alt"></i>
                      เดือน
                    </button>
                    <div id = "paChart_month_sel" class="dropdown-menu dropdown-menu-right" role="menu">
                      <a href="#" value="01" class="dropdown-item">มกราคม</a>
                      <a href="#" value="02" class="dropdown-item">กุมภาพันธ์</a>
                      <a href="#" value="03" class="dropdown-item">มีนาคม</a>
                      <a href="#" value="04" class="dropdown-item">เมษายน</a>
                      <a href="#" value="05" class="dropdown-item">พฤษภาคม</a>
                      <a href="#" value="06" class="dropdown-item">มิถุนายน</a>
                      <a href="#" value="07" class="dropdown-item">กรกฎาคม</a>
                      <a href="#" value="08" class="dropdown-item">สิงหาคม</a>
                      <a href="#" value="09" class="dropdown-item">กันยายน</a>
                      <a href="#" value="10" class="dropdown-item">ตุลาคม</a>
                      <a href="#" value="11" class="dropdown-item">พฤศจิกายน</a>
                      <a href="#" value="12" class="dropdown-item">ธันวาคม</a>
                    </div>
                  </div>

                  <div class="btn-group">
                    <button type="button" class="btn btn-tool dropdown-toggle" data-toggle="dropdown">
                      <i class="fas fa-calendar-alt"></i>
                      ปี
                    </button>
                    <div id="paChart_year_sel" class="dropdown-menu dropdown-menu-right" role="menu">  
                      <a href="#" class="dropdown-item">2562</a>
                      <a href="#" class="dropdown-item">2563</a>
                    </div>
                  </div> -->

                  <button type="button" class="btn btn-tool" data-card-widget="collapse">
                    <i class="fas fa-minus"></i>
                  </button>
                </div>
              </div>
              <!-- /.card-header -->
              <div class="card-body">
                <div class="row">
                  <div class="col-md-12">
                    <p class="text-center">
                      <strong id="paChart_header">ข้อมูลสะสมถึง กุมภาพันธ์ - 2563</strong>
                    </p>

                    <div class="chart">
                      <!-- Sales Chart Canvas -->
                      <canvas id="paChart" style="height: 500px;"></canvas>
                    </div>
                    <!-- /.chart-responsive -->
                  </div>
                  <!-- /.col -->
                </div>
                <!-- /.row -->
              </div>
              <!-- ./card-body -->
            </div>
            <!-- /.card -->
          </div>
          <!--End Col-->
        </div>
        <!--End Row #1-->
      </div>
    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->


  <!-- Main Footer -->
  <footer class="main-footer">
    ข้อมูลอ้างอิงจาก ข้อมูลสรุปรายงานกัญชา ณ 18 ก.พ.63
    <div class="float-right d-none d-sm-inline-block">
      
    </div>
  </footer>
</div>
<!-- ./wrapper -->

<!-- REQUIRED SCRIPTS -->
<!-- jQuery -->
<script src="plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- overlayScrollbars -->
<script src="plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.js"></script>


<!-- PAGE PLUGINS -->
<!-- jQuery Mapael -->
<script src="plugins/jquery-mousewheel/jquery.mousewheel.js"></script>
<script src="plugins/raphael/raphael.min.js"></script>
<script src="plugins/jquery-mapael/jquery.mapael.min.js"></script>
<script src="plugins/jquery-mapael/maps/usa_states.min.js"></script>
<!-- ChartJS -->
<script src="plugins/chart.js/Chart.min.js"></script>

<!-- PAGE SCRIPTS -->
<script src="https://d3js.org/d3.v5.min.js"></script>

<script>
  //Get Parameter
  var getReq = getUrlParameter("sortselected");
  if(getReq == undefined){
    getReq = "SAS";
  }
  var textMap = new Map();
  textMap.set("SAS", " (แผนปัจจุบัน)");
  textMap.set("AUR", " (แผนไทย)");
  textMap.set("DEJA", " (ผลิตภัณฑ์กัญชาน้ำมันเดชา)");
  $("#pageTitle").text(($("#pageTitle").text() + textMap.get(getReq)));
  
  $("#paChart_button").on('click', function(){
    window.location.href = ("./node_sell_2_details.html?sortselected=" + getReq);
  })

  //Document ready JQUERY
  $(function(){

  var tickStyle = {
    fontColor: 'white',
    fontStyle: 'bold'
  }
  var mode = 'index';
  var intersect = true;
  var paChart_options = {
    maintainAspectRatio: false,
    responsive: true,
    legend: {
      display: false,
      labels: {
        fontColor: "white",
      }
    },
    tooltips: {
      mode: mode,
      intersect: intersect
    },
    hover: {
      mode: mode,
      intersect: intersect
    },
    scales:{
      yAxes: [{
        gridLines: {
          display: true,
          lineWidth: '4px',
          color: 'rgba(0,0,0,0.2)',
          zeroLineColor: 'transparent'
        },
        ticks: $.extend({
          beginAtZero: true,

        }, tickStyle)
      }],
      xAxes: [{
        display: true,
        gridLines: {
          display: false
        },
        ticks: tickStyle
      }]
    },
    tooltips: {
      callbacks: {
        label: function(tooltipItem, barChartData){
          var label = barChartData.datasets[tooltipItem.datasetIndex].label || '';
          if (label){
            label += ': ';
          }
          label += Math.round(tooltipItem.yLabel * 100) / 100;
          label += ' unit';
          return label;
        }
      }
    }
  }

    var paChart_data;
    if(getReq == "SAS"){
      paChart_data = {
        labels  : ['รพ. เจ้าพระยาอภัยภูเบศร','องค์การเภสัชกรรม',],
        datasets: [
          
          {
            type                : 'bar',
            label               : 'จำนวนจ่าย',
            yAxesID: 'B',
            backgroundColor     : '#ff4d4d',
            fill                : false,
            data                : [18793,6548,]
          }
        ]
      }//End patient chart Data
    }
    else if(getReq == "AUR"){
      paChart_data = {
        labels  : ['โรงพยาบาลพระอาจารย์ฝั้น อาจาโร'],
        datasets: [
          
          {
            type                : 'bar',
            label               : 'จำนวนจ่าย',
            yAxesID: 'B',
            backgroundColor     : '#ff4d4d',
            fill                : false,
            data                : [68970]
          }
        ]
      }//End patient chart Data
    }
    else if(getReq == "DEJA"){
      paChart_data = {
        labels  : ['กรมการแพทย์แผนไทยและการแพทย์ทางเลือก'],
        datasets: [
          
          {
            type                : 'bar',
            label               : 'จำนวนจ่าย',
            yAxesID: 'B',
            backgroundColor     : '#ff4d4d',
            fill                : false,
            data                : [48150]
          }
        ]
      }//End patient chart Data
    }
    

    var paChart_canvas = $("#paChart").get(0).getContext('2d');
    var paChart = new Chart(paChart_canvas, {
        type: 'line',
        data: paChart_data,
        options: paChart_options
      }
    )
  });

  //Get Param from url function
  function getUrlParameter(sParam){
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split('&');
    var sParameterName;
    for(var i=0; i< sURLVariables.length; i++){
      sParameterName = sURLVariables[i].split('=');
      if(sParameterName[0] === sParam){
        return sParameterName[1] === undefined? true : decodeURIComponent(sParameterName[1]);
      }
    }
  }
</script>
</body>
</html>
